function fadeOutPreloader(t,e){var n=1,i=setInterval(function(){n<=0?(t.style.zIndex=0,t.style.opacity=0,t.style.filter="alpha(opacity = 0)",document.documentElement.style.overflowY="auto",document.getElementById("preloader").remove(),clearInterval(i)):(n-=.1,t.style.opacity=n,t.style.filter="alpha(opacity = "+100*n+")")},e)}setTimeout(function(){fadeOutPreloader(document.getElementById("preloader"),69)},1500),$(document).ready(function(){particlesJS.load("landing","assets/particles.json",function(){});var t=document.getElementById("txt-rotate"),e=t.getAttribute("data-rotate"),n=t.getAttribute("data-period"),i=(setTimeout(function(){new TxtRotate(t,JSON.parse(e),n)},1500),document.createElement("style"));i.type="text/css",i.innerHTML="#txt-rotate > .wrap { border-right: 0.08em solid #666 }",document.body.appendChild(i),AOS.init({disable:"mobile",offset:200,duration:600,easing:"ease-in-sine",delay:100,once:!0}),randomizeOrder(),initSectionDock(),sortNewsFeedByDate(),sortJournalClubFeedByDate(),initLogoRain()});var TxtRotate=function(t,e,n){this.toRotate=e,this.el=t,this.loopNum=0,this.period=parseInt(n,10)||2e3,this.txt="",this.tick(),this.isDeleting=!1};function randomizeOrder(){var t=document.getElementById("skills");if(t){for(var e=t.getElementsByTagName("div"),n=document.createDocumentFragment();e.length;)n.appendChild(e[Math.floor(Math.random()*e.length)]);t.appendChild(n)}}function initSectionDock(){var s,o,r,l,c,d,u,g,f,t,e,n,i,a,h,m,w,p=document.getElementById("section-dock");function y(){t.forEach(function(t){window.clearTimeout(t)}),(t=[]).push(window.setTimeout(function(){p.classList.add("is-idle-fade-1")},e)),t.push(window.setTimeout(function(){p.classList.remove("is-idle-fade-1"),p.classList.add("is-idle-fade-2")},n))}function v(){p.classList.remove("is-idle-fade-1"),p.classList.remove("is-idle-fade-2"),y()}function b(t){p.classList.toggle("is-scroll-compact",!!t)}function M(t){return t&&!t.classList.contains("section-mode-hidden")}function k(n){var t;c&&r[n]&&(Object.keys(r).forEach(function(t){var e=r[t],t=t===n;e.classList.toggle("section-mode-hidden",!t),e.setAttribute("aria-hidden",String(!t))}),l&&(l.classList.toggle("section-mode-hidden",!(t="news"===n)),l.setAttribute("aria-hidden",String(!t))))}function x(e){s.forEach(function(t){t.classList.toggle("is-active",t.getAttribute("data-target")===e)})}function E(t,e){var n;("research"===(n=t)?g:"news"===n?f:[]).forEach(function(t){t.classList.toggle("is-active",t.getAttribute("data-target")===e)}),"research"!==t&&g.forEach(function(t){t.classList.remove("is-active")}),"news"!==t&&f.forEach(function(t){t.classList.remove("is-active")})}function A(t){t&&(t.style.left="",t.style.right="")}function I(t){var e,n,i,a="research"===t?d:u,t=o[t];a&&t&&a.classList.contains("is-visible")?(e=p.getBoundingClientRect(),t=t.getBoundingClientRect(),n=a.offsetWidth,e.width&&n?(t=t.left-e.left+t.width/2-n/2,t=(i=e.width-n-6)<=6?Math.max((e.width-n)/2,0):Math.min(Math.max(t,6),i),a.style.left=t+"px",a.style.right="auto"):A(a)):A(a)}function L(t,e){var e="boolean"==typeof e?e:"research"===t||"news"===t,n=(p.classList.toggle("is-compact",e),e&&"research"===t&&0<g.length),t=e&&"news"===t&&0<f.length;d&&(d.classList.toggle("is-visible",n),d.setAttribute("aria-hidden",String(!n)),n||A(d)),u&&(u.classList.toggle("is-visible",t),u.setAttribute("aria-hidden",String(!t)),t||A(u)),n?I("research"):t&&I("news"),e||E("","")}function B(t,e,n){n=n||"smooth";"landing"===t?e.scrollIntoView({behavior:n,block:"start"}):(t=window.matchMedia&&window.matchMedia("(max-width: 47.99em)").matches?14:26,e=window.pageYOffset+e.getBoundingClientRect().top-t,window.scrollTo({top:Math.max(e,0),behavior:n}))}function S(t){if(!t.length)return"";var n=.35*window.innerHeight,i=t[0].getAttribute("data-target"),a=Number.POSITIVE_INFINITY;return t.forEach(function(t){var t=t.getAttribute("data-target"),e=document.getElementById(t);e&&M(e)&&((e=(e=e.getBoundingClientRect()).top<=n&&e.bottom>=n?0:Math.abs(e.top-n))<a&&(a=e,i=t))}),i}function D(t,e,n,i){if(t&&e&&M(t)&&M(e))return i="number"==typeof i?i:0,n=window.pageYOffset+window.innerHeight*("number"==typeof n?n:.35),t=t.getBoundingClientRect().top+window.pageYOffset,e=e.getBoundingClientRect().bottom+window.pageYOffset+i,t<=n&&n<=e}function C(){w||(w=!0,window.requestAnimationFrame(function(){n=.35*window.innerHeight,i=s[0].getAttribute("data-target"),a=Number.POSITIVE_INFINITY,s.forEach(function(t){var t=t.getAttribute("data-target"),e=document.getElementById(t);e&&M(e)&&((e=(e=e.getBoundingClientRect()).top<=n&&e.bottom>=n?0:Math.abs(e.top-n))<a&&(a=e,i=t))});var n,i,a,t=i,e="",o=(c&&D(r.research,r.research)?e="research":(o=l&&M(l)?l:r.news,c&&D(r.news,o,.3)&&(e="news")),"research"===(e=e||"research"!==t&&"news"!==t?e:t)||"news"===e?e:t);x(o),L(e,"landing"!==o),"research"===e?E("research",S(g)):"news"===e?E("news",S(f)):E("",""),w=!1}))}!p||(s=Array.prototype.slice.call(p.querySelectorAll(".section-dock-link"))).length&&(o={},s.forEach(function(t){o[t.getAttribute("data-target")]=t}),r={research:document.getElementById("research"),news:document.getElementById("news")},l=document.getElementById("journal-club"),c=!(!r.research||!r.news),d=document.getElementById("dock-context-research"),u=document.getElementById("dock-context-news"),g=d?Array.prototype.slice.call(d.querySelectorAll(".dock-context-link")):[],f=u?Array.prototype.slice.call(u.querySelectorAll(".dock-context-link")):[],t=[],e=3800,n=9500,i=window.pageYOffset||window.scrollY||0,a=10,s.forEach(function(n){n.addEventListener("click",function(t){t.preventDefault();var t=n.getAttribute("data-view"),t=(t&&k(t),n.getAttribute("data-target")),e=document.getElementById(t);e&&M(e)&&(B(t,e),x(t),e="","research"===t?e="research":"news"===t&&(e="news"),L(e,"landing"!==t),"research"===e?E("research",g.length?g[0].getAttribute("data-target"):""):"news"===e?E("news","news"):E("",""),window.history&&window.history.replaceState&&window.history.replaceState(null,"","#"+t))})}),g.concat(f).forEach(function(i){i.addEventListener("click",function(t){t.preventDefault();var t=i.getAttribute("data-context")||"",e=i.getAttribute("data-target"),n=document.getElementById(e);t&&k(t),n&&M(n)&&(B(e,n),L(t,!0),E(t,e),x("research"===t?"research":"news"),window.history&&window.history.replaceState&&window.history.replaceState(null,"","#"+e))})}),h=window.location.hash.replace("#",""),c&&(-1!==["news","journal-club"].indexOf(h)?(k("news"),L("news",!0),E("news","journal-club"===h?"journal-club":"news"),x("news")):-1!==["research","timeline","publications","projects"].indexOf(h)?(k("research"),L("research",!0),E("research","research"===h?g.length?g[0].getAttribute("data-target"):"":h),x("research")):(m=document.getElementById(h),L("",m=""!==h&&"landing"!==h&&!!m),m||E("",""))),h&&window.requestAnimationFrame(function(){var t=document.getElementById(h);t&&M(t)&&B(h,t,"auto")}),w=!1,window.addEventListener("scroll",function(){var t,e;t=window.pageYOffset||window.scrollY||0,e=t-i,t<=8?b(!1):a<e?b(!0):e<-a&&b(!1),i=t,v(),C()},{passive:!0}),window.addEventListener("resize",C),i=window.pageYOffset||window.scrollY||0,b(!1),v(),C())}function sortNewsFeedByDate(){var t,e=document.getElementById("combined-news-feed");!e||(t=Array.prototype.slice.call(e.querySelectorAll(".news-item"))).length&&(t.sort(function(t,e){t=parseInt(t.getAttribute("data-news-date"),10)||0;return(parseInt(e.getAttribute("data-news-date"),10)||0)-t}),t.forEach(function(t){e.appendChild(t)}),initNewsFeedPagination(e,t))}function initNewsFeedPagination(t,e){var n=document.getElementById("news-load-more");if(n){var i=document.getElementById("news-source-filters"),a=i?Array.prototype.slice.call(i.querySelectorAll("[data-news-filter]")):[],o=e&&e.length?e:Array.prototype.slice.call(t.querySelectorAll(".news-item"));if(!o.length)return n.classList.add("news-load-more-hidden"),void n.setAttribute("aria-hidden","true");var s="all",r=Math.min(5,o.length);n.addEventListener("click",function(t){t.preventDefault(),r=Math.min(l().length,r+10),d()}),a.forEach(function(e){e.addEventListener("click",function(){var t=e.getAttribute("data-news-filter")||"all";s=t,r=Math.min(5,l().length),c(),d()})}),c(),d()}function l(){return"all"===s?o:o.filter(function(t){return t.getAttribute("data-news-source")===s})}function c(){a.forEach(function(t){var e=t.getAttribute("data-news-filter")===s;t.classList.toggle("is-active",e),t.setAttribute("aria-pressed",String(e))})}function d(){var t=l(),t=(o.forEach(function(t){t.classList.add("news-item-hidden")}),t.forEach(function(t,e){t.classList.toggle("news-item-hidden",r<=e)}),r<t.length);n.classList.toggle("news-load-more-hidden",!t),n.setAttribute("aria-hidden",String(!t))}}function sortJournalClubFeedByDate(){var t,e=document.getElementById("journal-club-feed");!e||(t=Array.prototype.slice.call(e.querySelectorAll(".journal-item"))).length&&(t.sort(function(t,e){t=parseInt(t.getAttribute("data-journal-date"),10)||0;return(parseInt(e.getAttribute("data-journal-date"),10)||0)-t}),t.forEach(function(t){e.appendChild(t)}),initJournalClubPagination(e,t))}function initJournalClubPagination(t,e){var n=document.getElementById("journal-load-more");if(n){var i=document.getElementById("journal-source-filters"),a=i?Array.prototype.slice.call(i.querySelectorAll("[data-journal-filter]")):[],o=e&&e.length?e:Array.prototype.slice.call(t.querySelectorAll(".journal-item"));if(!o.length)return n.classList.add("news-load-more-hidden"),void n.setAttribute("aria-hidden","true");var s="all",r=Math.min(5,o.length);n.addEventListener("click",function(t){t.preventDefault(),r=Math.min(l().length,r+10),d()}),a.forEach(function(e){e.addEventListener("click",function(){var t=e.getAttribute("data-journal-filter")||"all";s=t,r=Math.min(5,l().length),c(),d()})}),c(),d()}function l(){return"all"===s?o:o.filter(function(t){return t.getAttribute("data-journal-source")===s})}function c(){a.forEach(function(t){var e=t.getAttribute("data-journal-filter")===s;t.classList.toggle("is-active",e),t.setAttribute("aria-pressed",String(e))})}function d(){var t=l(),t=(o.forEach(function(t){t.classList.add("news-item-hidden")}),t.forEach(function(t,e){t.classList.toggle("news-item-hidden",r<=e)}),r<t.length);n.classList.toggle("news-load-more-hidden",!t),n.setAttribute("aria-hidden",String(!t))}}function initLogoRain(){var c,d,u,t=document.getElementById("landing");function g(t,e){return t+Math.random()*(e-t)}function e(){var t,e,n,i,a,o=Math.random()<d.snowflakeChance?{kind:"snowflake",src:d.snowflakeSrcs[Math.floor(Math.random()*d.snowflakeSrcs.length)]}:{kind:"logo",src:d.logos[Math.floor(Math.random()*d.logos.length)]},s=document.createElement("span"),r=(s.className="logo-rain-drop","snowflake"===o.kind?(s.style.backgroundColor="transparent",s.style.color="transparent",e=g(d.snowflakeSizeMin,d.snowflakeSizeMax),n=g(d.snowflakeOpacityMin,d.snowflakeOpacityMax),i=g(d.snowflakeDurationMin,d.snowflakeDurationMax),a=g(d.snowflakeDriftMin,d.snowflakeDriftMax),s.classList.add("logo-rain-drop--snowflake"),s.style.backgroundImage='url("'+o.src+'")',s.style.webkitMaskImage="none",s.style.maskImage="none"):(s.style.backgroundColor=d.color,s.style.color=d.color,t=d.sizeMultiplierByLogo[o=o.src]||1,e=g(d.sizeMin,d.sizeMax)*t,n=g(d.opacityMin,d.opacityMax),i=g(d.durationMin,d.durationMax),a=g(d.driftMin,d.driftMax),s.style.backgroundImage='url("'+o+'")',s.style.webkitMaskImage='url("'+o+'")',s.style.maskImage='url("'+o+'")'),s.style.left=g(0,100)+"%",s.style.width=e.toFixed(2)+"px",s.style.height=e.toFixed(2)+"px",s.style.opacity=n.toFixed(2),s.style.animationDuration=i.toFixed(0)+"ms",s.style.setProperty("--logo-drift",a.toFixed(2)+"px"),s.style.setProperty("--logo-drift-quarter",(.25*a).toFixed(2)+"px"),s.style.setProperty("--logo-drift-mid",(.5*a).toFixed(2)+"px"),s.style.setProperty("--logo-drift-three-quarter",(.75*a).toFixed(2)+"px"),c.appendChild(s),u+=1,!1);function l(){r||(r=!0,s.remove(),u=Math.max(0,u-1))}s.addEventListener("animationend",l,{once:!0}),setTimeout(l,i+500)}t&&((c=document.createElement("div")).className="logo-rain-layer",t.appendChild(c),d={logos:["assets/img/ms8logo.png","assets/img/UoHlogo.png","assets/img/Dislogo.svg","assets/img/fulogo.png"],color:"#61B0B7",chancePerTick:.56,snowflakeChance:.6,snowflakeSrcs:["assets/img/snow0.png","assets/img/snow1.png","assets/img/snow2.png","assets/img/snow3.png","assets/img/snow4.png","assets/img/snow5.png"],tickMs:900,maxVisible:10,sizeMin:30,sizeMax:66,opacityMin:.35,opacityMax:.75,durationMin:9e3,durationMax:17e3,driftMin:-22,driftMax:22,snowflakeSizeMin:30,snowflakeSizeMax:52,snowflakeOpacityMin:.38,snowflakeOpacityMax:.72,snowflakeDurationMin:14e3,snowflakeDurationMax:24e3,snowflakeDriftMin:-22,snowflakeDriftMax:22,snowflakeSwayMin:14,snowflakeSwayMax:28,sizeMultiplierByLogo:{"assets/img/ms8logo.png":2,"assets/img/UoHlogo.png":2,"assets/img/Dislogo.svg":2,"assets/img/fulogo.png":4}},u=0,setInterval(function(){document.hidden||u>=d.maxVisible||Math.random()<d.chancePerTick&&e()},d.tickMs))}TxtRotate.prototype.tick=function(){var t=this.loopNum%this.toRotate.length,t=this.toRotate[t],e=(this.isDeleting?this.txt=t.substring(0,this.txt.length-1):this.txt=t.substring(0,this.txt.length+1),this.el.innerHTML='<span class="wrap">'+this.txt+"</span>",this),n=200-100*Math.random();this.isDeleting&&(n/=5),this.isDeleting||this.txt!==t?this.isDeleting&&""===this.txt&&(this.isDeleting=!1,this.loopNum++,n=500):(n=this.period,this.isDeleting=!0),setTimeout(function(){e.tick()},n)};