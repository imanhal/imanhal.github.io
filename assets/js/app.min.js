function fadeOutPreloader(t,e){var n=1,i=setInterval(function(){n<=0?(t.style.zIndex=0,t.style.opacity=0,t.style.filter="alpha(opacity = 0)",document.documentElement.style.overflowY="auto",document.getElementById("preloader").remove(),clearInterval(i)):(n-=.1,t.style.opacity=n,t.style.filter="alpha(opacity = "+100*n+")")},e)}setTimeout(function(){fadeOutPreloader(document.getElementById("preloader"),69)},1500),$(document).ready(function(){$(window).on("beforeunload",function(){window.scrollTo(0,0)}),particlesJS.load("landing","assets/particles.json",function(){});var t=document.getElementById("txt-rotate"),e=t.getAttribute("data-rotate"),n=t.getAttribute("data-period"),i=(setTimeout(function(){new TxtRotate(t,JSON.parse(e),n)},1500),document.createElement("style"));i.type="text/css",i.innerHTML="#txt-rotate > .wrap { border-right: 0.08em solid #666 }",document.body.appendChild(i),AOS.init({disable:"mobile",offset:200,duration:600,easing:"ease-in-sine",delay:100,once:!0}),randomizeOrder(),initSectionDock(),sortNewsFeedByDate(),initLogoRain()});var TxtRotate=function(t,e,n){this.toRotate=e,this.el=t,this.loopNum=0,this.period=parseInt(n,10)||2e3,this.txt="",this.tick(),this.isDeleting=!1};function randomizeOrder(){var t=document.getElementById("skills");if(t){for(var e=t.getElementsByTagName("div"),n=document.createDocumentFragment();e.length;)n.appendChild(e[Math.floor(Math.random()*e.length)]);t.appendChild(n)}}function initSectionDock(){var a,i,t,s,r,e,n=document.getElementById("section-dock");function l(t){return t&&!t.classList.contains("section-mode-hidden")}function o(n){t&&i[n]&&(Object.keys(i).forEach(function(t){var e=i[t],t=t===n;e.classList.toggle("section-mode-hidden",!t),e.setAttribute("aria-hidden",String(!t))}),s&&(s.classList.toggle("section-mode-hidden","research"!==n),s.setAttribute("aria-hidden",String("research"!==n))))}function d(e){a.forEach(function(t){t.classList.toggle("is-active",t.getAttribute("data-target")===e)})}function c(e){r.forEach(function(t){t.classList.toggle("is-active",t.getAttribute("data-target")===e)})}function g(){e||(e=!0,window.requestAnimationFrame(function(){d((n=.35*window.innerHeight,i=a[0].getAttribute("data-target"),o=Number.POSITIVE_INFINITY,a.forEach(function(t){var t=t.getAttribute("data-target"),e=document.getElementById(t);e&&l(e)&&((e=(e=e.getBoundingClientRect()).top<=n&&e.bottom>=n?0:Math.abs(e.top-n))<o&&(o=e,i=t))}),i));var n,i,o,t=function(){if(!r.length||!s||s.classList.contains("section-mode-hidden"))return"";var n=.35*window.innerHeight,i=r[0].getAttribute("data-target"),o=Number.POSITIVE_INFINITY;return r.forEach(function(t){var t=t.getAttribute("data-target"),e=document.getElementById(t);e&&l(e)&&((e=(e=e.getBoundingClientRect()).top<=n&&e.bottom>=n?0:Math.abs(e.top-n))<o&&(o=e,i=t))}),i}();t&&c(t),e=!1}))}!n||(a=Array.prototype.slice.call(n.querySelectorAll(".section-dock-link"))).length&&(i={research:document.getElementById("research"),news:document.getElementById("news")},t=!(!i.research||!i.news),s=document.getElementById("research-dock"),r=s?Array.prototype.slice.call(s.querySelectorAll(".section-dock-link")):[],a.forEach(function(n){n.addEventListener("click",function(t){t.preventDefault();var t=n.getAttribute("data-view"),t=(t?o(t):s&&"research"!==n.getAttribute("data-target")&&(s.classList.add("section-mode-hidden"),s.setAttribute("aria-hidden","true")),n.getAttribute("data-target")),e=document.getElementById(t);e&&l(e)&&(e.scrollIntoView({behavior:"smooth",block:"start"}),d(t),window.history&&window.history.replaceState&&window.history.replaceState(null,"","#"+t))})}),r.forEach(function(n){n.addEventListener("click",function(t){t.preventDefault();var t=n.getAttribute("data-target"),e=document.getElementById(t);e&&l(e)&&(e.scrollIntoView({behavior:"smooth",block:"start"}),c(t),window.history&&window.history.replaceState&&window.history.replaceState(null,"","#"+t))})}),t&&("news"===(n=window.location.hash.replace("#",""))?o("news"):"research"===n&&o("research")),e=!1,window.addEventListener("scroll",g,{passive:!0}),window.addEventListener("resize",g),g())}function sortNewsFeedByDate(){var t,e=document.getElementById("combined-news-feed");!e||(t=Array.prototype.slice.call(e.querySelectorAll(".news-item"))).length&&(t.sort(function(t,e){t=parseInt(t.getAttribute("data-news-date"),10)||0;return(parseInt(e.getAttribute("data-news-date"),10)||0)-t}),t.forEach(function(t){e.appendChild(t)}),initNewsFeedPagination(e,t))}function initNewsFeedPagination(t,e){var n=document.getElementById("news-load-more");if(n){var i=e&&e.length?e:Array.prototype.slice.call(t.querySelectorAll(".news-item"));if(!i.length)return n.classList.add("news-load-more-hidden"),void n.setAttribute("aria-hidden","true");var o=Math.min(20,i.length);n.addEventListener("click",function(t){t.preventDefault(),o=Math.min(i.length,o+50),a()}),a()}function a(){i.forEach(function(t,e){t.classList.toggle("news-item-hidden",o<=e)});var t=o<i.length;n.classList.toggle("news-load-more-hidden",!t),n.setAttribute("aria-hidden",String(!t))}}function initLogoRain(){var d,c,g,t=document.getElementById("landing");function u(t,e){return t+Math.random()*(e-t)}function e(){var t,e,n,i,o,a=Math.random()<c.snowflakeChance?{kind:"snowflake"}:{kind:"logo",src:c.logos[Math.floor(Math.random()*c.logos.length)]},s=document.createElement("span"),r=(s.className="logo-rain-drop",s.style.backgroundColor=c.color,s.style.color=c.color,"snowflake"===a.kind?(e=u(c.snowflakeSizeMin,c.snowflakeSizeMax),n=u(c.snowflakeOpacityMin,c.snowflakeOpacityMax),i=u(c.snowflakeDurationMin,c.snowflakeDurationMax),o=u(c.snowflakeDriftMin,c.snowflakeDriftMax),s.classList.add("logo-rain-drop--snowflake"),s.style.setProperty("--logo-sway",u(c.snowflakeSwayMin,c.snowflakeSwayMax).toFixed(2)+"px"),s.style.backgroundImage="none",s.style.webkitMaskImage="none",s.style.maskImage="none",(t=document.createElement("span")).className="logo-rain-snowflake-core",s.appendChild(t)):(a=c.sizeMultiplierByLogo[t=a.src]||1,e=u(c.sizeMin,c.sizeMax)*a,n=u(c.opacityMin,c.opacityMax),i=u(c.durationMin,c.durationMax),o=u(c.driftMin,c.driftMax),s.style.backgroundImage='url("'+t+'")',s.style.webkitMaskImage='url("'+t+'")',s.style.maskImage='url("'+t+'")'),s.style.left=u(0,100)+"%",s.style.width=e.toFixed(2)+"px",s.style.height=e.toFixed(2)+"px",s.style.opacity=n.toFixed(2),s.style.animationDuration=i.toFixed(0)+"ms",s.style.setProperty("--logo-drift",o.toFixed(2)+"px"),s.style.setProperty("--logo-drift-quarter",(.25*o).toFixed(2)+"px"),s.style.setProperty("--logo-drift-mid",(.5*o).toFixed(2)+"px"),s.style.setProperty("--logo-drift-three-quarter",(.75*o).toFixed(2)+"px"),d.appendChild(s),g+=1,!1);function l(){r||(r=!0,s.remove(),g=Math.max(0,g-1))}s.addEventListener("animationend",l,{once:!0}),setTimeout(l,i+500)}t&&((d=document.createElement("div")).className="logo-rain-layer",t.appendChild(d),c={logos:["assets/img/ms8logo.png","assets/img/UoHlogo.png","assets/img/Dislogo.svg","assets/img/fulogo.png"],color:"#61B0B7",chancePerTick:.48,snowflakeChance:.1,tickMs:900,maxVisible:8,sizeMin:30,sizeMax:66,opacityMin:.35,opacityMax:.75,durationMin:9e3,durationMax:17e3,driftMin:-40,driftMax:40,snowflakeSizeMin:22,snowflakeSizeMax:38,snowflakeOpacityMin:.28,snowflakeOpacityMax:.52,snowflakeDurationMin:1e4,snowflakeDurationMax:19e3,snowflakeDriftMin:-72,snowflakeDriftMax:72,snowflakeSwayMin:14,snowflakeSwayMax:28,sizeMultiplierByLogo:{"assets/img/ms8logo.png":2,"assets/img/UoHlogo.png":2,"assets/img/Dislogo.svg":2,"assets/img/fulogo.png":4}},g=0,setInterval(function(){document.hidden||g>=c.maxVisible||Math.random()<c.chancePerTick&&e()},c.tickMs))}TxtRotate.prototype.tick=function(){var t=this.loopNum%this.toRotate.length,t=this.toRotate[t],e=(this.isDeleting?this.txt=t.substring(0,this.txt.length-1):this.txt=t.substring(0,this.txt.length+1),this.el.innerHTML='<span class="wrap">'+this.txt+"</span>",this),n=200-100*Math.random();this.isDeleting&&(n/=5),this.isDeleting||this.txt!==t?this.isDeleting&&""===this.txt&&(this.isDeleting=!1,this.loopNum++,n=500):(n=this.period,this.isDeleting=!0),setTimeout(function(){e.tick()},n)};