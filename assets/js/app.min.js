function fadeOutPreloader(t,e){var n=1,i=setInterval(function(){n<=0?(t.style.zIndex=0,t.style.opacity=0,t.style.filter="alpha(opacity = 0)",document.documentElement.style.overflowY="auto",document.getElementById("preloader").remove(),clearInterval(i)):(n-=.1,t.style.opacity=n,t.style.filter="alpha(opacity = "+100*n+")")},e)}setTimeout(function(){fadeOutPreloader(document.getElementById("preloader"),69)},1500),$(document).ready(function(){$(window).on("beforeunload",function(){window.scrollTo(0,0)}),particlesJS.load("landing","assets/particles.json",function(){});var t=document.getElementById("txt-rotate"),e=t.getAttribute("data-rotate"),n=t.getAttribute("data-period"),i=(setTimeout(function(){new TxtRotate(t,JSON.parse(e),n)},1500),document.createElement("style"));i.type="text/css",i.innerHTML="#txt-rotate > .wrap { border-right: 0.08em solid #666 }",document.body.appendChild(i),AOS.init({disable:"mobile",offset:200,duration:600,easing:"ease-in-sine",delay:100,once:!0}),randomizeOrder(),initSectionDock(),sortNewsFeedByDate(),sortJournalClubFeedByDate(),initLogoRain()});var TxtRotate=function(t,e,n){this.toRotate=e,this.el=t,this.loopNum=0,this.period=parseInt(n,10)||2e3,this.txt="",this.tick(),this.isDeleting=!1};function randomizeOrder(){var t=document.getElementById("skills");if(t){for(var e=t.getElementsByTagName("div"),n=document.createDocumentFragment();e.length;)n.appendChild(e[Math.floor(Math.random()*e.length)]);t.appendChild(n)}}function initSectionDock(){var o,i,e,a,r,s,l,t=document.getElementById("section-dock");function d(t){return!!t&&!t.classList.contains("section-mode-hidden")}function c(n){var t;a&&i[n]&&(Object.keys(i).forEach(function(t){var e=i[t],t=t===n;e.classList.toggle("section-mode-hidden",!t),e.setAttribute("aria-hidden",String(!t))}),e&&(e.classList.toggle("section-mode-hidden",!(t="news"===n)),e.setAttribute("aria-hidden",String(!t))),r&&"news"===n&&(r.classList.add("section-mode-hidden"),r.setAttribute("aria-hidden","true")))}function u(t){r&&a&&(t=d(i.research)&&"research"===t,r.classList.toggle("section-mode-hidden",!t),r.setAttribute("aria-hidden",String(!t)))}function g(e){o.forEach(function(t){t.classList.toggle("is-active",t.getAttribute("data-target")===e)})}function f(e){s.forEach(function(t){t.classList.toggle("is-active",t.getAttribute("data-target")===e)})}function h(t,e){"landing"===t?e.scrollIntoView({behavior:"smooth",block:"start"}):(t=window.matchMedia&&window.matchMedia("(max-width: 47.99em)").matches?14:26,e=window.pageYOffset+e.getBoundingClientRect().top-t,window.scrollTo({top:Math.max(e,0),behavior:"smooth"}))}function n(){l||(l=!0,window.requestAnimationFrame(function(){n=.35*window.innerHeight,i=o[0].getAttribute("data-target"),a=Number.POSITIVE_INFINITY,o.forEach(function(t){var t=t.getAttribute("data-target"),e=document.getElementById(t);e&&d(e)&&((e=(e=e.getBoundingClientRect()).top<=n&&e.bottom>=n?0:Math.abs(e.top-n))<a&&(a=e,i=t))});var n,i,a,t=i,t=(g(t),u(t),function(){if(!s.length||!r||r.classList.contains("section-mode-hidden"))return"";var n=.35*window.innerHeight,i=s[0].getAttribute("data-target"),a=Number.POSITIVE_INFINITY;return s.forEach(function(t){var t=t.getAttribute("data-target"),e=document.getElementById(t);e&&d(e)&&((e=(e=e.getBoundingClientRect()).top<=n&&e.bottom>=n?0:Math.abs(e.top-n))<a&&(a=e,i=t))}),i}());t&&f(t),l=!1}))}!t||(o=Array.prototype.slice.call(t.querySelectorAll(".section-dock-link"))).length&&(i={research:document.getElementById("research"),news:document.getElementById("news")},e=document.getElementById("journal-club"),a=!(!i.research||!i.news),r=document.getElementById("research-dock"),s=r?Array.prototype.slice.call(r.querySelectorAll(".section-dock-link")):[],o.forEach(function(n){n.addEventListener("click",function(t){t.preventDefault();var t=n.getAttribute("data-view"),t=(t?c(t):r&&"research"!==n.getAttribute("data-target")&&(r.classList.add("section-mode-hidden"),r.setAttribute("aria-hidden","true")),n.getAttribute("data-target")),e=document.getElementById(t);e&&d(e)&&(h(t,e),g(t),u(t),window.history&&window.history.replaceState&&window.history.replaceState(null,"","#"+t))})}),s.forEach(function(n){n.addEventListener("click",function(t){t.preventDefault();var t=n.getAttribute("data-target"),e=document.getElementById(t);e&&d(e)&&(h(t,e),f(t),window.history&&window.history.replaceState&&window.history.replaceState(null,"","#"+t))})}),a&&("news"===(t=window.location.hash.replace("#",""))?c("news"):"research"===t&&c("research")),l=!1,window.addEventListener("scroll",n,{passive:!0}),window.addEventListener("resize",n),n())}function sortNewsFeedByDate(){var t,e=document.getElementById("combined-news-feed");!e||(t=Array.prototype.slice.call(e.querySelectorAll(".news-item"))).length&&(t.sort(function(t,e){t=parseInt(t.getAttribute("data-news-date"),10)||0;return(parseInt(e.getAttribute("data-news-date"),10)||0)-t}),t.forEach(function(t){e.appendChild(t)}),initNewsFeedPagination(e,t))}function initNewsFeedPagination(t,e){var n=document.getElementById("news-load-more");if(n){var i=document.getElementById("news-source-filters"),a=i?Array.prototype.slice.call(i.querySelectorAll("[data-news-filter]")):[],o=e&&e.length?e:Array.prototype.slice.call(t.querySelectorAll(".news-item"));if(!o.length)return n.classList.add("news-load-more-hidden"),void n.setAttribute("aria-hidden","true");var r="all",s=Math.min(5,o.length);n.addEventListener("click",function(t){t.preventDefault(),s=Math.min(l().length,s+10),c()}),a.forEach(function(e){e.addEventListener("click",function(){var t=e.getAttribute("data-news-filter")||"all";r=t,s=Math.min(5,l().length),d(),c()})}),d(),c()}function l(){return"all"===r?o:o.filter(function(t){return t.getAttribute("data-news-source")===r})}function d(){a.forEach(function(t){var e=t.getAttribute("data-news-filter")===r;t.classList.toggle("is-active",e),t.setAttribute("aria-pressed",String(e))})}function c(){var t=l(),t=(o.forEach(function(t){t.classList.add("news-item-hidden")}),t.forEach(function(t,e){t.classList.toggle("news-item-hidden",s<=e)}),s<t.length);n.classList.toggle("news-load-more-hidden",!t),n.setAttribute("aria-hidden",String(!t))}}function sortJournalClubFeedByDate(){var t,e=document.getElementById("journal-club-feed");!e||(t=Array.prototype.slice.call(e.querySelectorAll(".journal-item"))).length&&(t.sort(function(t,e){t=parseInt(t.getAttribute("data-journal-date"),10)||0;return(parseInt(e.getAttribute("data-journal-date"),10)||0)-t}),t.forEach(function(t){e.appendChild(t)}),initJournalClubPagination(e,t))}function initJournalClubPagination(t,e){var n=document.getElementById("journal-load-more");if(n){var i=document.getElementById("journal-source-filters"),a=i?Array.prototype.slice.call(i.querySelectorAll("[data-journal-filter]")):[],o=e&&e.length?e:Array.prototype.slice.call(t.querySelectorAll(".journal-item"));if(!o.length)return n.classList.add("news-load-more-hidden"),void n.setAttribute("aria-hidden","true");var r="all",s=Math.min(5,o.length);n.addEventListener("click",function(t){t.preventDefault(),s=Math.min(l().length,s+10),c()}),a.forEach(function(e){e.addEventListener("click",function(){var t=e.getAttribute("data-journal-filter")||"all";r=t,s=Math.min(5,l().length),d(),c()})}),d(),c()}function l(){return"all"===r?o:o.filter(function(t){return t.getAttribute("data-journal-source")===r})}function d(){a.forEach(function(t){var e=t.getAttribute("data-journal-filter")===r;t.classList.toggle("is-active",e),t.setAttribute("aria-pressed",String(e))})}function c(){var t=l(),t=(o.forEach(function(t){t.classList.add("news-item-hidden")}),t.forEach(function(t,e){t.classList.toggle("news-item-hidden",s<=e)}),s<t.length);n.classList.toggle("news-load-more-hidden",!t),n.setAttribute("aria-hidden",String(!t))}}function initLogoRain(){var d,c,u,t=document.getElementById("landing");function g(t,e){return t+Math.random()*(e-t)}function e(){var t,e,n,i,a,o=Math.random()<c.snowflakeChance?{kind:"snowflake",src:c.snowflakeSrcs[Math.floor(Math.random()*c.snowflakeSrcs.length)]}:{kind:"logo",src:c.logos[Math.floor(Math.random()*c.logos.length)]},r=document.createElement("span"),s=(r.className="logo-rain-drop","snowflake"===o.kind?(r.style.backgroundColor="transparent",r.style.color="transparent",e=g(c.snowflakeSizeMin,c.snowflakeSizeMax),n=g(c.snowflakeOpacityMin,c.snowflakeOpacityMax),i=g(c.snowflakeDurationMin,c.snowflakeDurationMax),a=g(c.snowflakeDriftMin,c.snowflakeDriftMax),r.classList.add("logo-rain-drop--snowflake"),r.style.backgroundImage='url("'+o.src+'")',r.style.webkitMaskImage="none",r.style.maskImage="none"):(r.style.backgroundColor=c.color,r.style.color=c.color,t=c.sizeMultiplierByLogo[o=o.src]||1,e=g(c.sizeMin,c.sizeMax)*t,n=g(c.opacityMin,c.opacityMax),i=g(c.durationMin,c.durationMax),a=g(c.driftMin,c.driftMax),r.style.backgroundImage='url("'+o+'")',r.style.webkitMaskImage='url("'+o+'")',r.style.maskImage='url("'+o+'")'),r.style.left=g(0,100)+"%",r.style.width=e.toFixed(2)+"px",r.style.height=e.toFixed(2)+"px",r.style.opacity=n.toFixed(2),r.style.animationDuration=i.toFixed(0)+"ms",r.style.setProperty("--logo-drift",a.toFixed(2)+"px"),r.style.setProperty("--logo-drift-quarter",(.25*a).toFixed(2)+"px"),r.style.setProperty("--logo-drift-mid",(.5*a).toFixed(2)+"px"),r.style.setProperty("--logo-drift-three-quarter",(.75*a).toFixed(2)+"px"),d.appendChild(r),u+=1,!1);function l(){s||(s=!0,r.remove(),u=Math.max(0,u-1))}r.addEventListener("animationend",l,{once:!0}),setTimeout(l,i+500)}t&&((d=document.createElement("div")).className="logo-rain-layer",t.appendChild(d),c={logos:["assets/img/ms8logo.png","assets/img/UoHlogo.png","assets/img/Dislogo.svg","assets/img/fulogo.png"],color:"#61B0B7",chancePerTick:.56,snowflakeChance:.6,snowflakeSrcs:["assets/img/snow0.png","assets/img/snow1.png","assets/img/snow2.png","assets/img/snow3.png","assets/img/snow4.png","assets/img/snow5.png"],tickMs:900,maxVisible:10,sizeMin:30,sizeMax:66,opacityMin:.35,opacityMax:.75,durationMin:9e3,durationMax:17e3,driftMin:-22,driftMax:22,snowflakeSizeMin:30,snowflakeSizeMax:52,snowflakeOpacityMin:.38,snowflakeOpacityMax:.72,snowflakeDurationMin:14e3,snowflakeDurationMax:24e3,snowflakeDriftMin:-22,snowflakeDriftMax:22,snowflakeSwayMin:14,snowflakeSwayMax:28,sizeMultiplierByLogo:{"assets/img/ms8logo.png":2,"assets/img/UoHlogo.png":2,"assets/img/Dislogo.svg":2,"assets/img/fulogo.png":4}},u=0,setInterval(function(){document.hidden||u>=c.maxVisible||Math.random()<c.chancePerTick&&e()},c.tickMs))}TxtRotate.prototype.tick=function(){var t=this.loopNum%this.toRotate.length,t=this.toRotate[t],e=(this.isDeleting?this.txt=t.substring(0,this.txt.length-1):this.txt=t.substring(0,this.txt.length+1),this.el.innerHTML='<span class="wrap">'+this.txt+"</span>",this),n=200-100*Math.random();this.isDeleting&&(n/=5),this.isDeleting||this.txt!==t?this.isDeleting&&""===this.txt&&(this.isDeleting=!1,this.loopNum++,n=500):(n=this.period,this.isDeleting=!0),setTimeout(function(){e.tick()},n)};
